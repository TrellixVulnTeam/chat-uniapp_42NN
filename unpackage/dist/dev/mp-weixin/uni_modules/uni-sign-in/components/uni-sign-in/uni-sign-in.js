(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in"],{512:function(n,e,t){"use strict";t.r(e);var o=t(513),r=t(515);for(var i in r)"default"!==i&&function(n){t.d(e,n,(function(){return r[n]}))}(i);t(518);var s,u=t(23),a=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);a.options.__file="uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.vue",e["default"]=a.exports},513:function(n,e,t){"use strict";t.r(e);var o=t(514);t.d(e,"render",(function(){return o["render"]})),t.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(e,"components",(function(){return o["components"]}))},514:function(n,e,t){"use strict";var o;t.r(e),t.d(e,"render",(function(){return r})),t.d(e,"staticRenderFns",(function(){return s})),t.d(e,"recyclableRender",(function(){return i})),t.d(e,"components",(function(){return o}));try{o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,531))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,490))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var n=this,e=n.$createElement,t=(n._self._c,n.__map(n.weekdays,(function(e,t){var o=n.__get_orig(e),r=n.signInRes.days.includes(e-1),i=n.signInRes.days.includes(e-1);return{$orig:o,g0:r,g1:i}})));n.$mp.data=Object.assign({},{$root:{l0:t}})},i=!1,s=[];r._withStripped=!0},515:function(n,e,t){"use strict";t.r(e);var o=t(516),r=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=r.a},516:function(n,e,t){"use strict";(function(n,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(t(11)),i=s(t(517));function s(n){return n&&n.__esModule?n:{default:n}}function u(n,e,t,o,r,i,s){try{var u=n[i](s),a=u.value}catch(c){return void t(c)}u.done?e(a):Promise.resolve(a).then(o,r)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var i=n.apply(e,t);function s(n){u(i,o,r,s,a,"next",n)}function a(n){u(i,o,r,s,a,"throw",n)}s(void 0)}))}}var c=n.database(),d=c.action("signIn").collection("opendb-sign-in"),l=(new Date((new Date).toLocaleDateString()).getTime(),{name:"uni-signIn",data:function(){return{total:0,scores:0,weekdays:[1,2,3,4,5,6,7],signInRes:{days:[],n:0}}},mounted:function(){},methods:{getSignedInInfo:function(){var n=arguments,e=this;return a(r.default.mark((function t(){var i,s,u;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.length>0&&void 0!==n[0]?n[0]:"今日已签过",s=new Date((new Date).toLocaleDateString()).getTime(),t.next=4,d.where("'user_id' == $env.uid && 'date' == ".concat(s," && 'isDelete' == false")).get();case 4:return u=t.sent,u.result.data.length&&(e.signInRes=u.result,e.$refs.popup.open(),o.showToast({title:i,duration:3e3,icon:"none"})),t.abrupt("return",u.result.data);case 7:case"end":return t.stop()}}),t)})))()},showRewardedVideoAd:function(){var n=this;return a(r.default.mark((function e(){var t,s,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getSignedInInfo();case 2:if(t=e.sent,console.log(t),!t||0!=t.length){e.next=10;break}if(s=o.getStorageSync("userInfo"),u=s._id,console.log(u,o.getStorageSync("userInfo")),u){e.next=9;break}return e.abrupt("return",o.navigateTo({url:"/pages/ucenter/login-page/index/index"}));case 9:i.default.show({adpid:1733738477,adType:"RewardedVideo",urlCallback:{userId:u,extra:"uniSignIn"}},(function(e){if(e&&e.isEnded){console.log("onClose "+e.isEnded);var t=0;o.showLoading({mask:!0});var i=setInterval(function(){var s=a(r.default.mark((function s(u){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t++,r.next=3,n.getSignedInInfo("签到成功");case 3:e=r.sent,(t>2||e.length)&&(e.length||o.showToast({title:"签到失败！",icon:"error",duration:6e3}),clearInterval(i),o.hideLoading());case 5:case"end":return r.stop()}}),s)})));return function(n){return s.apply(this,arguments)}}(),2e3)}else console.log("onClose "+e.isEnded),o.showToast({title:"播放中途退出,签到失败！",icon:"error",duration:5e3})}),(function(n){console.log(n),o.showToast({title:n.errMsg,icon:"none"})}));case 10:case"end":return e.stop()}}),e)})))()},open:function(){var n=this;return a(r.default.mark((function e(){var t,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.showLoading({mask:!0}),e.prev=1,e.next=4,n.getSignedInInfo();case 4:if(t=e.sent,!t||0!=t.length){e.next=14;break}return e.next=8,d.add({});case 8:i=e.sent,console.log(i),o.hideLoading(),n.signInRes=i.result,n.$refs.popup.open(),7==n.signInRes.days.length?o.showToast({title:"你已完成7日连续签到，获得60积分！",icon:"none",duration:5e3}):o.showToast({title:"签到成功,获得10积分！",icon:"none",duration:5e3});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),o.hideLoading(),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))()},closeMe:function(n){this.$refs.popup.close()}}});e.default=l}).call(this,t(10)["default"],t(1)["default"])},518:function(n,e,t){"use strict";t.r(e);var o=t(519),r=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=r.a},519:function(n,e,t){}}]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component',
    {
        'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(512))
        })
    },
    [['uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component']]
]);
